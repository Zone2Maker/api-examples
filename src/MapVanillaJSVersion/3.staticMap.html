<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.8/kakao.min.js"
      integrity="sha384-WUSirVbD0ASvo37f3qQZuDap8wy76aJjmGyXKOYgPL/NdAs8HhgmPlk9dz2XQsNv"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=발급받은api키"
    ></script>
    <title>정적 지도</title>
    <style>
      body {
        padding: 30px 0px;
      }
      #container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      #location {
        width: 400px;
        height: 400px;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h2>현재 나의 위치는..</h2>
      <div id="location"></div>
    </div>

    <script>
      // 현재 위치 받아서 마커가 있는 정적 지도 생성하기
      function initMap() {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            console.log(lat, lng);

            // 지도 그리기
            const container = document.querySelector("#location");

            const markerPosition = new window.kakao.maps.LatLng(lat, lng);

            const marker = new window.kakao.maps.Marker({
              position: markerPosition,
            });

            const options = {
              center: new window.kakao.maps.LatLng(lat, lng),
              level: 3,
              marker: marker,
            };

            const map = new window.kakao.maps.StaticMap(container, options);
          },
          () => {
            alert("브라우저에서 현재 위치를 지원하지 않습니다.");
          }
        );
      }

      window.addEventListener("load", initMap());
    </script>
  </body>
</html>
